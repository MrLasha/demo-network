"use strict";(self.webpackChunkreact_kabzda_1=self.webpackChunkreact_kabzda_1||[]).push([[998],{7998:function(e,s,t){t.r(s),t.d(s,{default:function(){return J}});var i=t(5671),n=t(3144),r=t(136),o=t(7277),a=t(1413),l=t(2791),u=t(3531),c=t(7689),d=t(7781),h=t(3990),p=t(5705),f="MyPosts_postBlock__PmS1m",x="MyPosts_posts__Xu6py",j="Post_item__yEsuP",v=t(184),m=function(e){return(0,v.jsxs)("div",{className:j,children:[(0,v.jsx)("div",{children:e.massage}),(0,v.jsx)("img",{src:"https://cdn1.flamp.ru/dca5e616d0d0278f7ac33bb2ace74573.jpg"}),(0,v.jsx)("div",{children:(0,v.jsxs)("span",{children:["Like ",e.likesCount]})})]})},b=l.memo((function(e){var s=e.posts.map((function(e){return(0,v.jsx)(m,{massage:e.message,likesCount:e.likesCount},e.id)}));return(0,v.jsx)("div",{className:f,children:(0,v.jsxs)("div",{children:[(0,v.jsx)("h3",{children:"My posts"}),(0,v.jsxs)("div",{children:["New post",(0,v.jsx)(g,{props:e}),(0,v.jsx)("div",{className:x,children:s})]})]})})})),g=function(e){var s=e.props;return(0,v.jsx)(p.J9,{initialValues:{newPostText:""},onSubmit:function(e){s.addPost(e.newPostText)},children:(0,v.jsxs)(p.l0,{children:[(0,v.jsx)(p.gN,{as:"textarea",placeholder:"Add your post",name:"newPostText"}),(0,v.jsx)("div",{children:(0,v.jsx)("button",{type:"submit",children:"Add post "})})]})})},k=b,P=(0,u.$j)((function(e){return{posts:e.profilePage.posts,newPostText:e.profilePage.newPostText}}),(function(e){return{addPost:function(s){e((0,h.Wl)(s))}}}))(k),_=t(9439),y=t(6073),S="ProfileInfo_descriptionBlock__wvuZ0",Z="ProfileInfo_mainPhoto__-N+pF",N="ProfileInfo_contact__W5zH+",w=function(e){var s=(0,l.useState)(!1),t=(0,_.Z)(s,2),i=t[0],n=t[1],r=(0,l.useState)(e.status),o=(0,_.Z)(r,2),a=o[0],u=o[1];(0,l.useEffect)((function(){u(e.status)}),[e.status]);return(0,v.jsxs)("div",{children:[!i&&(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Status: "}),(0,v.jsxs)("span",{onDoubleClick:function(){n(!0)},children:[e.status||"---------"," "]})]}),i&&(0,v.jsx)("div",{children:(0,v.jsx)("input",{autoFocus:!0,onBlur:function(){n(!1),e.updateStatus(a)},onChange:function(e){u(e.currentTarget.value)},value:a})})]})},I=t(7711),L=t(6727),U=L.Ry({aboutMe:L.Z_().min(2,"Too Short!").max(50,"Too Long!").required("Required"),fullName:L.Z_().required("Required"),contacts:L.Ry({facebook:L.Z_().url("Invalid URL"),website:L.Z_().url("Invalid URL"),vk:L.Z_().url("Invalid URL"),twitter:L.Z_().url("Invalid URL"),instagram:L.Z_().url("Invalid URL"),youtube:L.Z_().url("Invalid URL"),github:L.Z_().url("Invalid URL"),mainLink:L.Z_().url("Invalid URL")})}),A=function(e){var s=e.onSubmit,t=e.initialValues,i=e.profile;return(0,v.jsx)(p.J9,{validationSchema:U,initialValues:t,onSubmit:s,children:(0,v.jsxs)(p.l0,{children:[(0,v.jsx)("div",{children:(0,v.jsx)("button",{type:"submit",id:"submit",name:"submit",children:"Save"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:(0,v.jsx)("b",{children:"About me:"})}),(0,v.jsx)(p.gN,{placeholder:"About Me",type:"textarea",id:"aboutMe",name:"aboutMe"}),(0,v.jsx)("div",{children:(0,v.jsx)(p.Bc,{name:"aboutMe"})})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job:"}),(0,v.jsx)(p.gN,{type:"checkbox",name:"lookingForAJob"})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:(0,v.jsx)("b",{children:"Looking for a job description:"})}),(0,v.jsx)(p.gN,{placeholder:"Description",type:"textarea",id:"lookingForAJobDescription",name:"lookingForAJobDescription"}),(0,v.jsx)("div",{children:(0,v.jsx)(p.Bc,{name:"lookingForAJobDescription"})})]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:(0,v.jsx)("b",{children:"Full name:"})}),(0,v.jsx)(p.gN,{placeholder:"Full name",type:"textarea",id:"fullName",name:"fullName"}),(0,v.jsx)("div",{children:(0,v.jsx)(p.Bc,{name:"fullName"})})]}),(0,v.jsx)("div",{children:Object.keys(i.contacts).map((function(e){return(0,v.jsxs)("div",{className:N,children:[(0,v.jsxs)("b",{children:[e,":"," ",(0,v.jsx)(p.gN,{type:"input",name:"contacts."+e,placeholder:e})]}),(0,v.jsx)("div",{children:(0,v.jsx)(p.Bc,{name:"contacts.".concat(e)})})]},e)}))})]})})},R=function(e){var s=e.profile,t=e.isOwner,i=e.goToEditMode;return(0,v.jsxs)("div",{children:[t&&(0,v.jsx)("div",{children:(0,v.jsx)("button",{onClick:i,children:"Edit"})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"About me:"})," ",s.aboutMe||"..."]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job:"}),s.lookingForAJob?"yes":"no"]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Looking for a job description:"}),s.lookingForAJobDescription]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Full name:"})," ",s.fullName]}),(0,v.jsxs)("div",{children:[(0,v.jsx)("b",{children:"Contacts"}),":"," ",Object.keys(s.contacts).map((function(e){return(0,v.jsx)(T,{contactTitle:e,contactValue:s.contacts[e]},e)}))]})]})},T=function(e){var s=e.contactTitle,t=e.contactValue;return(0,v.jsxs)("div",{className:N,children:[(0,v.jsxs)("b",{children:[s,": "]})," ",t]})},C=function(e){var s=e.profile,t=e.status,i=e.updateStatus,n=e.isOwner,r=e.savePhoto,o=e.saveProfile,a=(0,l.useState)(!1),u=(0,_.Z)(a,2),c=u[0],d=u[1];if(!s)return(0,v.jsx)(y.Z,{});return(0,v.jsxs)("div",{children:[(0,v.jsx)("div",{children:(0,v.jsx)("img",{src:"https://images.ctfassets.net/hrltx12pl8hq/4f6DfV5DbqaQUSw0uo0mWi/6fbcf889bdef65c5b92ffee86b13fc44/shutterstock_376532611.jpg?fit=fill&w=800&h=300"})}),(0,v.jsxs)("div",{className:S,children:[(0,v.jsx)("div",{children:(0,v.jsx)(w,{status:t,updateStatus:i})}),(0,v.jsxs)("div",{children:[(0,v.jsx)("img",{src:s.photos.large||I,className:Z}),(0,v.jsx)("div",{children:n&&(0,v.jsx)("input",{type:"file",onChange:function(e){e.target.files.length&&r(e.target.files[0])}})})]}),c?(0,v.jsx)(A,{initialValues:s,profile:s,onSubmit:function(e){o(e),d(!1)}}):(0,v.jsx)(R,{goToEditMode:function(){d(!0)},profile:s,isOwner:n})]})]})},M=function(e){var s=e.profile,t=e.status,i=e.updateStatus,n=e.isOwner,r=e.savePhoto,o=e.saveProfile;return(0,v.jsxs)("div",{children:[(0,v.jsx)(C,{savePhoto:r,saveProfile:o,isOwner:n,profile:s,status:t,updateStatus:i}),(0,v.jsx)(P,{})]})},D=t(7193);var F=function(e){(0,r.Z)(t,e);var s=(0,o.Z)(t);function t(){return(0,i.Z)(this,t),s.apply(this,arguments)}return(0,n.Z)(t,[{key:"refreshProfile",value:function(){var e=this.props.router.params.profileId;e||(e=this.props.autorizedUserId),this.props.getUserProfile(e),this.props.getStatus(e)}},{key:"componentDidMount",value:function(){this.refreshProfile()}},{key:"componentDidUpdate",value:function(e){this.props.router.params.profileId!=e.router.params.profileId&&this.refreshProfile()}},{key:"render",value:function(){return(0,v.jsx)(M,(0,a.Z)((0,a.Z)({},this.props),{},{isOwner:!this.props.router.params.profileId,profile:this.props.profile,status:this.props.status,updateStatus:this.props.updateStatus,savePhoto:this.props.savePhoto}))}}]),t}(l.Component),J=(0,d.qC)((0,u.$j)((function(e){return{profile:e.profilePage.profile,status:e.profilePage.status,autorizedUserId:e.auth.userId,isAuth:e.auth.isAuth}}),{getUserProfile:h.et,getStatus:h.lR,updateStatus:h.Nf,savePhoto:h.Ju,saveProfile:h.Ii}),(function(e){return function(s){var t=(0,c.TH)(),i=(0,c.s0)(),n=(0,c.UO)();return(0,v.jsx)(e,(0,a.Z)((0,a.Z)({},s),{},{router:{location:t,navigate:i,params:n}}))}}),D.D)(F)}}]);
//# sourceMappingURL=998.4f478474.chunk.js.map